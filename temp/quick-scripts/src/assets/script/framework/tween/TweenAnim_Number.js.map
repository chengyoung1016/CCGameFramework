{"version":3,"sources":["assets/script/framework/tween/TweenAnim_Number.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import PlayOppBaseComponent, { PlayOpp } from \"../utils/PlayOppBaseComponent\";\nimport TKLog from \"../log/TKLog\";\n\nconst {ccclass, property} = cc._decorator;\n/**\n * 改变数字\n * 从startNum变化动goalNum\n * 并可以通过回调函数来回调变化过程值\n */\n@ccclass\nexport default class TweenAnim_Number extends PlayOppBaseComponent{\n    \n    @property(cc.Float)\n    protected startNum  = 0;\n    @property(cc.Float)\n    protected goalNum = 100;\n    @property(cc.Float)\n    protected dur = 1;\n    @property(cc.Float)\n    protected delay = 0;\n\n    // 保留有效小数位数\n    @property(cc.Integer)\n    fixed = 0;\n    // 是否输出到Label上，如果为null则不输出到label\n    @property(cc.Label)\n    toLabel : cc.Label = null;\n    // 输出到label上的前缀，比如 “当前：”\n    @property(cc.String)\n    preLabel = \"\";\n    // 输出到label上的后缀，比如 %\n    @property(cc.String)\n    suffixLabel = \"\";\n\n    protected numChangedCallback : Function = null;\n    protected  isStart = false;\n    protected numObj = {num : 0}\n\n    start(){\n        if(this.opp == PlayOpp.Update){\n            TKLog.LogWarn(\"此tweenAnim不建议使用Update执行！！！！！\")\n        }\n        super.start();\n    }\n\n    Init(startNum : number, goalNum : number, dur : number, delay : number){\n        this.startNum = startNum;\n        this.goalNum = goalNum;\n        this.dur = dur;\n        this.delay = delay;\n        this.isStart = false;\n    }\n\n    Excute(){\n       this.numObj.num = this.startNum;\n\n       cc.tween(this.numObj).delay(this.delay).to(this.dur, {num : this.goalNum}).call(()=>{\n            if(this.numChangedCallback != null){\n                this.numChangedCallback(this.goalNum);\n            }\n            this.isStart = false;\n            if(this.toLabel != null){\n                this.toLabel.string = this.preLabel + this.goalNum.toString() + this.suffixLabel;\n            }\n       }).start();\n       this.isStart = true;\n    }\n\n    update(dt){\n        super.update(dt);\n        if(this.isStart){\n            let curNum = this.numObj.num.toFixed(this.fixed);\n           \n            if(this.numChangedCallback != null){\n                this.numChangedCallback(curNum);\n            }\n            if(this.toLabel != null){\n                this.toLabel.string = this.preLabel + curNum.toString() + this.suffixLabel;\n            }\n        }\n    }\n}"]}